{"version":3,"sources":["../../src/js/scripts.js"],"names":["document","addEventListener","console","log","Date","prototype","toDateInputValue","local","setMinutes","getMinutes","getTimezoneOffset","toJSON","slice","getElementById","value","dateSelector","todaysDate","currentDate","gridArea","querySelector","articleNumber","url","apiKey","imageCount","resultsArray","alert","incDecDate","displayArticles","clearPrevious","querySelectorAll","length","elems","forEach","element","remove","incDec","date","result","setDate","getDate","toISOString","createDateArray","articleCount","dates","push","newDate","dateArray","addRemoteDataToArray","reverse","createNewElements","showArticles","classList","add","results","index","fetch","then","response","json","data","Promise","resolve","assemble","insertAdjacentHTML","postUrl","hdurl","articleTitleContent","title","articleImageContent","placeHolderImage","placeHolderImageAreaDimensions","imageLink","titleLink","articleTitleArea","articleImageArea","innerHTML","setAttribute"],"mappings":"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","sourcesContent":["'use strict';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  console.log('DOM fully loaded and parsed');\n\n  Date.prototype.toDateInputValue = function () {\n    let local = new Date(this);\n    local.setMinutes(this.getMinutes() - this.getTimezoneOffset());\n    return local.toJSON().slice(0, 10);\n  };\n  document.getElementById(\n    'date-selector'\n  ).value = new Date().toDateInputValue();\n\n  // variables\n  const dateSelector = document.getElementById('date-selector');\n  const todaysDate = dateSelector.value;\n  let currentDate = dateSelector.value;\n  const gridArea = document.querySelector('#image-grid-area');\n  const articleNumber = document.querySelector('#article-number');\n  const url = 'https://api.nasa.gov/planetary/apod?';\n  const apiKey = 'api_key=ZyAZ65TRjYZ4Sto72jlrgtOieAXPJuVymJFrf0RS';\n  let imageCount = 1;\n  let resultsArray = [];\n\n  //Events\n  document.getElementById('next-page').addEventListener('click', function () {\n    if (currentDate == todaysDate) {\n      alert('you are viewing the most recent pictures');\n    } else {\n      currentDate = incDecDate(1, currentDate);\n      displayArticles();\n    }\n  });\n\n  document\n    .getElementById('previous-page')\n    .addEventListener('click', function () {\n      dateSelector.value = incDecDate(-1, dateSelector.value);\n      displayArticles();\n    });\n\n  document\n    .getElementById('show-articles')\n    .addEventListener('click', function () {\n      displayArticles();\n    });\n\n  displayArticles();\n\n  // functions\n  function clearPrevious() {\n    if (document.querySelectorAll('article').length > 0) {\n      var elems = document.querySelectorAll('article');\n      elems.forEach((element) => {\n        element.remove();\n      });\n    }\n  }\n\n  function incDecDate(incDec, date) {\n    let result = new Date(date);\n    result.setDate(result.getDate() + incDec);\n    result = result.toISOString().slice(0, 10);\n    return result;\n  }\n\n  function createDateArray() {\n    let articleCount = articleNumber.value;\n    let date = dateSelector.value;\n    let dates = [];\n    dates.push(date);\n    articleCount--;\n    while (articleCount > 0) {\n      let newDate = incDecDate(-1, date);\n      dates.push(newDate);\n      articleCount--;\n      date = newDate;\n    }\n    return dates;\n  }\n\n  async function displayArticles() {\n    clearPrevious();\n    imageCount = 1;\n    let dateArray = createDateArray();\n    resultsArray = await addRemoteDataToArray(dateArray);\n    console.log(\n      'ðŸš€ ~ file: scripts.js ~ line 94 ~ displayArticles ~ resultsArray',\n      resultsArray\n    );\n    resultsArray = resultsArray.reverse();\n    resultsArray.forEach((element) => {\n      createNewElements(element);\n    });\n    showArticles();\n  }\n\n  function showArticles() {\n    document.querySelectorAll('article').forEach((element) => {\n      if (element.querySelector('img')) {\n        element.querySelector('img').addEventListener('load', () => {\n          element.classList.add('show');\n        });\n      }\n    });\n  }\n\n  async function addRemoteDataToArray(dateArray) {\n    let results = [];\n    for (let index = 0; index < dateArray.length; index++) {\n      const date = dateArray[index];\n      await fetch(url + apiKey + '&date=' + date).then((response) =>\n        response.json().then(function (data) {\n          results[index] = data;\n        })\n      );\n    }\n    return new Promise((resolve) => {\n      resolve(results);\n    });\n  }\n\n  function assemble() {\n    resultsArray.forEach((element) => {\n      createNewElements(element);\n      console.log('assemble', element);\n    });\n  }\n\n  function createNewElements(data) {\n    console.log('called create new');\n    gridArea.insertAdjacentHTML(\n      'beforeend',\n      '<article id=\"article' +\n        imageCount +\n        '\" class=\"article\"><a target=\"_blank\" id=\"image-link' +\n        imageCount +\n        '\" data-fancybox=\"gallery\" class=\"image-link\"><img id=\"img' +\n        imageCount +\n        '\" src=\"\" class=\"images\"></a><a target=\"_blank\" id=\"title-link' +\n        imageCount +\n        '\" class=\"\"title-link><h5 id=\"title' +\n        imageCount +\n        '\" class=\"title\"></h5></a></article>'\n    );\n\n    let postUrl = data.hdurl;\n    let articleTitleContent = data.title;\n    let articleImageContent = data.url;\n    let placeHolderImage = '/images/space.jpg';\n    let placeHolderImageAreaDimensions = \"width: '25%', 'margin-top': '15px'\";\n    let imageLink = document.querySelector('#image-link' + imageCount);\n    let titleLink = document.querySelector('#title-link' + imageCount);\n    let articleTitleArea = document.getElementById('title' + imageCount);\n    let articleImageArea = document.getElementById('img' + imageCount);\n\n    articleTitleArea.innerHTML = articleTitleContent;\n    imageLink.setAttribute('href', postUrl);\n    titleLink.setAttribute('href', postUrl);\n\n    if (articleImageContent != null) {\n      articleImageArea.setAttribute('src', articleImageContent);\n    } else {\n      articleImageArea\n        .setAttribute('style', placeHolderImageAreaDimensions)\n        .setAttribute('src', placeHolderImage);\n    }\n    imageCount++;\n  }\n});\n"],"file":"scripts.js"}