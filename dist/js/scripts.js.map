{"version":3,"sources":["../../src/js/scripts.js"],"names":["document","addEventListener","event","console","log","dateSelector","querySelector","todaysDate","value","gridArea","articleNumber","url","apiKey","imageCount","resultsArray","Date","prototype","toDateInputValue","local","setMinutes","getMinutes","getTimezoneOffset","toJSON","slice","getElementById","alert","incDecDate","displayArticles","clearPrevious","querySelectorAll","length","elems","forEach","element","remove","incDec","date","result","setDate","getDate","toISOString","createDateArray","articleCount","dates","push","newDate","dateArray","addRemoteDataToArray","setTimeout","reverse","createNewElements","index","fetch","then","response","json","data","assemble","insertAdjacentHTML","postUrl","hdurl","articleTitleContent","title","articleImageContent","placeHolderImage","placeHolderImageAreaDimensions","imageLink","titleLink","articleTitleArea","articleImageArea","innerHTML","setAttribute"],"mappings":"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","sourcesContent":["'use strict';\n\ndocument.addEventListener('DOMContentLoaded', function(event) {\n  console.log('DOM fully loaded and parsed');\n  // variables\n  const dateSelector = document.querySelector('#date-selector');\n  const todaysDate = dateSelector.value;\n  const gridArea = document.querySelector('#image-grid-area');\n  const articleNumber = document.querySelector('#article-number');\n  const url = 'https://api.nasa.gov/planetary/apod?';\n  const apiKey = 'api_key=ZyAZ65TRjYZ4Sto72jlrgtOieAXPJuVymJFrf0RS';\n  let imageCount = 1;\n  let resultsArray = [];\n\n  Date.prototype.toDateInputValue = function() {\n    var local = new Date(this);\n    local.setMinutes(this.getMinutes() - this.getTimezoneOffset());\n    return local.toJSON().slice(0, 10);\n  };\n  document.getElementById('date-selector').value = new Date().toDateInputValue();\n\n  //Events\n  document.getElementById('next-page').addEventListener('click', function() {\n    if (dateSelector.value == todaysDate) {\n      alert('you are viewing the most recent pictures');\n    } else {\n      dateSelector.value = incDecDate(1, dateSelector.value);\n      displayArticles();\n    }\n  });\n\n  document.getElementById('previous-page').addEventListener('click', function() {\n    dateSelector.value = incDecDate(-1, dateSelector.value);\n    displayArticles();\n  });\n\n  document.getElementById('show-articles').addEventListener('click', function() {\n    displayArticles();\n  });\n\n  displayArticles();\n\n  // functions\n  function clearPrevious() {\n    if (document.querySelectorAll('article').length > 0) {\n      var elems = document.querySelectorAll('article');\n      elems.forEach(element => {\n        element.remove();\n      });\n    }\n  }\n\n  function incDecDate(incDec, date) {\n    let result = new Date(date);\n    result.setDate(result.getDate() + incDec);\n    result = result.toISOString().slice(0, 10);\n    return result;\n  }\n\n  function createDateArray() {\n    let articleCount = articleNumber.value;\n    let date = dateSelector.value;\n    let dates = [];\n    dates.push(date);\n    articleCount--;\n    while (articleCount > 0) {\n      let newDate = incDecDate(-1, date);\n      dates.push(newDate);\n      articleCount--;\n      date = newDate;\n    }\n    return dates;\n  }\n\n  function displayArticles() {\n    clearPrevious();\n    imageCount = 1;\n    let dateArray = createDateArray();\n    addRemoteDataToArray(dateArray, resultsArray);\n    setTimeout(() => {\n      resultsArray = resultsArray.reverse();\n      resultsArray.forEach(element => {\n        createNewElements(element);\n      });\n    }, 1000);\n  }\n\n  function addRemoteDataToArray(dateArray, resultsArray) {\n    for (let index = 0; index < dateArray.length; index++) {\n      const date = dateArray[index];\n      fetch(url + apiKey + '&date=' + date).then(response =>\n        response.json().then(function(data) {\n          resultsArray[index] = data;\n        })\n      );\n    }\n    console.log(resultsArray);\n  }\n  // function getRemoteData(date) {\n  //   fetch(url + apiKey + '&date=' + date, {})\n  //     .then(response => response.json())\n  //     .then(function(data) {\n  //       createNewElements(data);\n  //     });\n  // }\n\n  function assemble() {\n    resultsArray.forEach(element => {\n      createNewElements(element);\n      console.log(element);\n    });\n  }\n\n  function createNewElements(data) {\n    gridArea.insertAdjacentHTML(\n      'beforeend',\n      '<article id=\"article' +\n        imageCount +\n        '\" class=\"article\"><a target=\"_blank\" id=\"image-link' +\n        imageCount +\n        '\" data-fancybox=\"gallery\" class=\"image-link\"><img id=\"img' +\n        imageCount +\n        '\" src=\"\" class=\"images\"></a><a target=\"_blank\" id=\"title-link' +\n        imageCount +\n        '\" class=\"\"title-link><h5 id=\"title' +\n        imageCount +\n        '\" class=\"title\"></h5></a></article>'\n    );\n\n    let postUrl = data.hdurl;\n    let articleTitleContent = data.title;\n    let articleImageContent = data.url;\n    let placeHolderImage = 'space.jpg';\n    let placeHolderImageAreaDimensions = \"width: '25%', 'margin-top': '15px'\";\n    let imageLink = document.querySelector('#image-link' + imageCount);\n    let titleLink = document.querySelector('#title-link' + imageCount);\n    let articleTitleArea = document.getElementById('title' + imageCount);\n    let articleImageArea = document.getElementById('img' + imageCount);\n\n    articleTitleArea.innerHTML = articleTitleContent;\n    imageLink.setAttribute('href', postUrl);\n    titleLink.setAttribute('href', postUrl);\n\n    if (articleImageContent != null) {\n      articleImageArea.setAttribute('src', articleImageContent);\n    } else {\n      articleImageArea\n        .setAttribute('style', placeHolderImageAreaDimensions)\n        .setAttribute('src', placeHolderImage);\n    }\n    imageCount++;\n  }\n});\n"],"file":"scripts.js"}