{"version":3,"sources":["../../scripts.js"],"names":["$","document","ready","dateSelector","querySelector","gridArea","articleNumber","Date","prototype","toDateInputValue","local","setMinutes","getMinutes","getTimezoneOffset","toJSON","slice","getElementById","value","click","incDecDate","displayArticles","hover","find","addClass","removeClass","clearClones","querySelectorAll","length","elems","forEach","element","remove","days","date","result","setDate","getDate","toISOString","createDateArray","articleCount","dates","push","newDate","currentDate","dateArray","url","apiKey","imageCount","fetch","then","response","json","data","insertAdjacentHTML","postUrl","hdurl","articleTitleContent","title","articleImageContent","imageSize","placeHolderImage","imageAreaDimensions","width","placeHolderImageAreaDimensions","imageLink","titleLink","articleTitleArea","articleImageArea","html","setAttribute","css","attr"],"mappings":"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","file":"scripts.js","sourcesContent":["\"use strict\";\r\n\r\n$(document).ready(function () {\r\n    // Event handlers\r\n\r\n    var dateSelector = document.querySelector(\"#date-selector\");\r\n    var gridArea = document.querySelector(\"#image-grid-area\");\r\n    var articleNumber = document.querySelector('#article-number');\r\n\r\n    Date.prototype.toDateInputValue = (function () {\r\n        var local = new Date(this);\r\n        local.setMinutes(this.getMinutes() - this.getTimezoneOffset());\r\n        return local\r\n            .toJSON()\r\n            .slice(0, 10);\r\n    });\r\n    document\r\n        .getElementById('date-selector')\r\n        .value = new Date().toDateInputValue();\r\n\r\n    $(\"#next-page\").click(function () {\r\n        dateSelector.value = incDecDate(1, dateSelector.value);\r\n        displayArticles();\r\n    });\r\n\r\n    $(\"#previous-page\").click(function () {\r\n        dateSelector.value = incDecDate(-1, dateSelector.value);\r\n        displayArticles();\r\n    });\r\n\r\n    $(\"#show-articles\").click(function () {\r\n        displayArticles();\r\n    });\r\n\r\n    $(\".article\").hover(function () {\r\n        $(this)\r\n            .find(\"a\")\r\n            .addClass(\"highlighted\");\r\n    }, function () {\r\n        $(this)\r\n            .find(\"a\")\r\n            .removeClass(\"highlighted\");\r\n    });\r\n\r\n    displayArticles();\r\n\r\n    // functions\r\n\r\n    function clearClones() {\r\n        if (document.querySelectorAll(\"article\").length > 0) {\r\n            var elems = document.querySelectorAll(\"article\");\r\n            elems.forEach(element => {\r\n                element.remove();\r\n            });\r\n        }\r\n    }\r\n\r\n    function incDecDate(days, date) {\r\n        let result = new Date(date);\r\n        result.setDate(result.getDate() + days);\r\n        result = result\r\n            .toISOString()\r\n            .slice(0, 10);\r\n        return result;\r\n    }\r\n\r\n    function createDateArray() {\r\n        let articleCount = articleNumber.value;\r\n        let date = dateSelector.value;\r\n        let dates = [];\r\n        dates.push(date);\r\n        articleCount--;\r\n        while(articleCount>0){\r\n            let newDate = incDecDate(-1, date)\r\n            dates.push(newDate);\r\n            articleCount--;\r\n            date = newDate;\r\n        }\r\n        return dates;\r\n    }\r\n\r\n    function displayArticles() {\r\n        //Clear previous article element clones if any are present...\r\n        clearClones();\r\n        let currentDate = \"date=\" + dateSelector.value;\r\n        let dateArray = createDateArray();\r\n        let url = \"https://api.nasa.gov/planetary/apod?\";\r\n        let apiKey = \"api_key=ZyAZ65TRjYZ4Sto72jlrgtOieAXPJuVymJFrf0RS\";\r\n        let imageCount = 1;\r\n\r\n        dateArray.forEach(element => {\r\n            fetch(url + apiKey + \"&date=\" + element, {})\r\n                .then(response => response.json())\r\n                .then(function (data) {\r\n                    gridArea.insertAdjacentHTML(\"beforeend\", '<article id=\"article' + imageCount + '\" class=\"article\"><a target=\"_blank\" id=\"image-link' + imageCount + '\" data-fancybox=\"gallery\" class=\"image-link\"><img id=\"img' + imageCount + '\" src=\"\" class=\"images\"></a><a target=\"_blank\" id=\"title-link' + imageCount + '\" class=\"\"title-link><h5 id=\"title' + imageCount + '\" class=\"title\"></h5></a></article>');\r\n\r\n                    let postUrl = data.hdurl;\r\n                    let articleTitleContent = data.title;\r\n                    let articleImageContent = data.url;\r\n                    let imageSize = \"w=600&h=400&fit=1\";\r\n                    let placeHolderImage = \"space.jpg\";\r\n                    let imageAreaDimensions = {\r\n                        width: \"100%\",\r\n                        \"margin-top\": \"0px\"\r\n                    };\r\n                    let placeHolderImageAreaDimensions = {\r\n                        width: \"25%\",\r\n                        \"margin-top\": \"15px\"\r\n                    };\r\n                    let imageLink = document.querySelector(\"#image-link\" + imageCount + \"\");\r\n                    let titleLink = document.querySelector(\"#title-link\" + imageCount + \"\");\r\n                    let articleTitleArea = $(\"#title\" + imageCount + \"\");\r\n                    let articleImageArea = $(\"#img\" + imageCount + \"\");\r\n\r\n                    articleTitleArea.html(articleTitleContent);\r\n                    imageLink.setAttribute(\"href\", postUrl);\r\n                    titleLink.setAttribute(\"href\", postUrl);\r\n\r\n                    if (articleImageContent != null) {\r\n                        articleImageArea\r\n                            .css(imageAreaDimensions)\r\n                            .attr(\"src\", articleImageContent + \"?\" + imageSize);\r\n                    } else {\r\n                        articleImageArea\r\n                            .css(placeHolderImageAreaDimensions)\r\n                            .attr(\"src\", placeHolderImage);\r\n                    }\r\n                    imageCount++;\r\n                });\r\n        });\r\n    }\r\n});\r\n"]}