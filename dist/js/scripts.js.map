{"version":3,"sources":["../../scripts.js"],"names":["$","document","ready","dateSelector","querySelector","todaysDate","value","gridArea","articleNumber","Date","prototype","toDateInputValue","local","setMinutes","getMinutes","getTimezoneOffset","toJSON","slice","getElementById","click","alert","incDecDate","displayArticles","hover","find","addClass","removeClass","clearClones","querySelectorAll","length","elems","forEach","element","remove","incDec","date","result","setDate","getDate","toISOString","createDateArray","articleCount","dates","push","newDate","currentDate","dateArray","url","apiKey","imageCount","fetch","then","response","json","data","insertAdjacentHTML","postUrl","hdurl","articleTitleContent","title","articleImageContent","placeHolderImage","placeHolderImageAreaDimensions","width","imageLink","titleLink","articleTitleArea","articleImageArea","html","setAttribute","attr","css"],"mappings":"AAAA;;AAEAA,EAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAY;AAC1B;;AAEA,QAAMC,eAAeF,SAASG,aAAT,CAAuB,gBAAvB,CAArB;AACA,QAAMC,aAAaF,aAAaG,KAAhC;AACA,QAAMC,WAAWN,SAASG,aAAT,CAAuB,kBAAvB,CAAjB;AACA,QAAMI,gBAAgBP,SAASG,aAAT,CAAuB,iBAAvB,CAAtB;;AAEAK,SAAKC,SAAL,CAAeC,gBAAf,GAAmC,YAAY;AAC3C,YAAIC,QAAQ,IAAIH,IAAJ,CAAS,IAAT,CAAZ;AACAG,cAAMC,UAAN,CAAiB,KAAKC,UAAL,KAAoB,KAAKC,iBAAL,EAArC;AACA,eAAOH,MACFI,MADE,GAEFC,KAFE,CAEI,CAFJ,EAEO,EAFP,CAAP;AAGH,KAND;AAOAhB,aACKiB,cADL,CACoB,eADpB,EAEKZ,KAFL,GAEa,IAAIG,IAAJ,GAAWE,gBAAX,EAFb;;AAIAX,MAAE,YAAF,EAAgBmB,KAAhB,CAAsB,YAAY;AAC9B,YAAIhB,aAAaG,KAAb,IAAsBD,UAA1B,EAAsC;AAClCe,kBAAM,0CAAN;AACH,SAFD,MAEO;AACHjB,yBAAaG,KAAb,GAAqBe,WAAW,CAAX,EAAclB,aAAaG,KAA3B,CAArB;AACAgB;AACH;AACJ,KAPD;;AASAtB,MAAE,gBAAF,EAAoBmB,KAApB,CAA0B,YAAY;AAClChB,qBAAaG,KAAb,GAAqBe,WAAW,CAAC,CAAZ,EAAelB,aAAaG,KAA5B,CAArB;AACAgB;AACH,KAHD;;AAKAtB,MAAE,gBAAF,EAAoBmB,KAApB,CAA0B,YAAY;AAClCG;AACH,KAFD;;AAIAtB,MAAE,UAAF,EAAcuB,KAAd,CAAoB,YAAY;AAC5BvB,UAAE,IAAF,EACKwB,IADL,CACU,GADV,EAEKC,QAFL,CAEc,aAFd;AAGH,KAJD,EAIG,YAAY;AACXzB,UAAE,IAAF,EACKwB,IADL,CACU,GADV,EAEKE,WAFL,CAEiB,aAFjB;AAGH,KARD;;AAUAJ;;AAEA;;AAEA,aAASK,WAAT,GAAuB;AACnB,YAAI1B,SAAS2B,gBAAT,CAA0B,SAA1B,EAAqCC,MAArC,GAA8C,CAAlD,EAAqD;AACjD,gBAAIC,QAAQ7B,SAAS2B,gBAAT,CAA0B,SAA1B,CAAZ;AACAE,kBAAMC,OAAN,CAAc,mBAAW;AACrBC,wBAAQC,MAAR;AACH,aAFD;AAGH;AACJ;;AAED,aAASZ,UAAT,CAAoBa,MAApB,EAA4BC,IAA5B,EAAkC;AAC9B,YAAIC,SAAS,IAAI3B,IAAJ,CAAS0B,IAAT,CAAb;AACAC,eAAOC,OAAP,CAAeD,OAAOE,OAAP,KAAmBJ,MAAlC;AACAE,iBAASA,OACJG,WADI,GAEJtB,KAFI,CAEE,CAFF,EAEK,EAFL,CAAT;AAGA,eAAOmB,MAAP;AACH;;AAED,aAASI,eAAT,GAA2B;AACvB,YAAIC,eAAejC,cAAcF,KAAjC;AACA,YAAI6B,OAAOhC,aAAaG,KAAxB;AACA,YAAIoC,QAAQ,EAAZ;AACAA,cAAMC,IAAN,CAAWR,IAAX;AACAM;AACA,eAAOA,eAAe,CAAtB,EAAyB;AACrB,gBAAIG,UAAUvB,WAAW,CAAC,CAAZ,EAAec,IAAf,CAAd;AACAO,kBAAMC,IAAN,CAAWC,OAAX;AACAH;AACAN,mBAAOS,OAAP;AACH;AACD,eAAOF,KAAP;AACH;;AAED,aAASpB,eAAT,GAA2B;AACvB;AACAK;AACA,YAAIkB,cAAc,UAAU1C,aAAaG,KAAzC;AACA,YAAIwC,YAAYN,iBAAhB;AACA,YAAIO,MAAM,sCAAV;AACA,YAAIC,SAAS,kDAAb;AACA,YAAIC,aAAa,CAAjB;;AAEAH,kBAAUf,OAAV,CAAkB,mBAAW;AACzBmB,kBAAMH,MAAMC,MAAN,GAAe,QAAf,GAA0BhB,OAAhC,EAAyC,EAAzC,EACKmB,IADL,CACU;AAAA,uBAAYC,SAASC,IAAT,EAAZ;AAAA,aADV,EAEKF,IAFL,CAEU,UAAUG,IAAV,EAAgB;AAClB/C,yBAASgD,kBAAT,CAA4B,WAA5B,EAAyC,yBAAyBN,UAAzB,GAAsC,qDAAtC,GAA8FA,UAA9F,GAA2G,2DAA3G,GAAyKA,UAAzK,GAAsL,+DAAtL,GAAwPA,UAAxP,GAAqQ,oCAArQ,GAA4SA,UAA5S,GAAyT,qCAAlW;;AAEA,oBAAIO,UAAUF,KAAKG,KAAnB;AACA,oBAAIC,sBAAsBJ,KAAKK,KAA/B;AACA,oBAAIC,sBAAsBN,KAAKP,GAA/B;AACA;AACA,oBAAIc,mBAAmB,WAAvB;AACA;AACA,oBAAIC,iCAAiC;AACjCC,2BAAO,KAD0B;AAEjC,kCAAc;AAFmB,iBAArC;AAIA,oBAAIC,YAAY/D,SAASG,aAAT,CAAuB,gBAAgB6C,UAAhB,GAA6B,EAApD,CAAhB;AACA,oBAAIgB,YAAYhE,SAASG,aAAT,CAAuB,gBAAgB6C,UAAhB,GAA6B,EAApD,CAAhB;AACA,oBAAIiB,mBAAmBlE,EAAE,WAAWiD,UAAX,GAAwB,EAA1B,CAAvB;AACA,oBAAIkB,mBAAmBnE,EAAE,SAASiD,UAAT,GAAsB,EAAxB,CAAvB;;AAEAiB,iCAAiBE,IAAjB,CAAsBV,mBAAtB;AACAM,0BAAUK,YAAV,CAAuB,MAAvB,EAA+Bb,OAA/B;AACAS,0BAAUI,YAAV,CAAuB,MAAvB,EAA+Bb,OAA/B;;AAEA,oBAAII,uBAAuB,IAA3B,EAAiC;AAC7BO;AACA;AADA,qBAEKG,IAFL,CAEU,KAFV,EAEiBV,mBAFjB;AAGH,iBAJD,MAIO;AACHO,qCACKI,GADL,CACST,8BADT,EAEKQ,IAFL,CAEU,KAFV,EAEiBT,gBAFjB;AAGH;AACDZ;AACH,aAlCL;AAmCH,SApCD;AAqCH;AACJ,CAnID","file":"scripts.js","sourcesContent":["\"use strict\";\r\n\r\n$(document).ready(function () {\r\n    // Event handlers\r\n\r\n    const dateSelector = document.querySelector(\"#date-selector\");\r\n    const todaysDate = dateSelector.value;\r\n    const gridArea = document.querySelector(\"#image-grid-area\");\r\n    const articleNumber = document.querySelector('#article-number');\r\n\r\n    Date.prototype.toDateInputValue = (function () {\r\n        var local = new Date(this);\r\n        local.setMinutes(this.getMinutes() - this.getTimezoneOffset());\r\n        return local\r\n            .toJSON()\r\n            .slice(0, 10);\r\n    });\r\n    document\r\n        .getElementById('date-selector')\r\n        .value = new Date().toDateInputValue();\r\n\r\n    $(\"#next-page\").click(function () {\r\n        if (dateSelector.value == todaysDate) {\r\n            alert('you are viewing the most recent pictures');\r\n        } else {\r\n            dateSelector.value = incDecDate(1, dateSelector.value);\r\n            displayArticles();\r\n        }\r\n    });\r\n\r\n    $(\"#previous-page\").click(function () {\r\n        dateSelector.value = incDecDate(-1, dateSelector.value);\r\n        displayArticles();\r\n    });\r\n\r\n    $(\"#show-articles\").click(function () {\r\n        displayArticles();\r\n    });\r\n\r\n    $(\".article\").hover(function () {\r\n        $(this)\r\n            .find(\"a\")\r\n            .addClass(\"highlighted\");\r\n    }, function () {\r\n        $(this)\r\n            .find(\"a\")\r\n            .removeClass(\"highlighted\");\r\n    });\r\n\r\n    displayArticles();\r\n\r\n    // functions\r\n\r\n    function clearClones() {\r\n        if (document.querySelectorAll(\"article\").length > 0) {\r\n            var elems = document.querySelectorAll(\"article\");\r\n            elems.forEach(element => {\r\n                element.remove();\r\n            });\r\n        }\r\n    }\r\n\r\n    function incDecDate(incDec, date) {\r\n        let result = new Date(date);\r\n        result.setDate(result.getDate() + incDec);\r\n        result = result\r\n            .toISOString()\r\n            .slice(0, 10);\r\n        return result;\r\n    }\r\n\r\n    function createDateArray() {\r\n        let articleCount = articleNumber.value;\r\n        let date = dateSelector.value;\r\n        let dates = [];\r\n        dates.push(date);\r\n        articleCount--;\r\n        while (articleCount > 0) {\r\n            let newDate = incDecDate(-1, date)\r\n            dates.push(newDate);\r\n            articleCount--;\r\n            date = newDate;\r\n        }\r\n        return dates;\r\n    }\r\n\r\n    function displayArticles() {\r\n        //Clear previous article element clones if any are present...\r\n        clearClones();\r\n        let currentDate = \"date=\" + dateSelector.value;\r\n        let dateArray = createDateArray();\r\n        let url = \"https://api.nasa.gov/planetary/apod?\";\r\n        let apiKey = \"api_key=ZyAZ65TRjYZ4Sto72jlrgtOieAXPJuVymJFrf0RS\";\r\n        let imageCount = 1;\r\n\r\n        dateArray.forEach(element => {\r\n            fetch(url + apiKey + \"&date=\" + element, {})\r\n                .then(response => response.json())\r\n                .then(function (data) {\r\n                    gridArea.insertAdjacentHTML(\"beforeend\", '<article id=\"article' + imageCount + '\" class=\"article\"><a target=\"_blank\" id=\"image-link' + imageCount + '\" data-fancybox=\"gallery\" class=\"image-link\"><img id=\"img' + imageCount + '\" src=\"\" class=\"images\"></a><a target=\"_blank\" id=\"title-link' + imageCount + '\" class=\"\"title-link><h5 id=\"title' + imageCount + '\" class=\"title\"></h5></a></article>');\r\n\r\n                    let postUrl = data.hdurl;\r\n                    let articleTitleContent = data.title;\r\n                    let articleImageContent = data.url;\r\n                    // let imageSize = \"w=600&h=400&fit=1\";\r\n                    let placeHolderImage = \"space.jpg\";\r\n                    // let imageAreaDimensions = {     width: \"100%\",     \"margin-top\": \"0px\" };\r\n                    let placeHolderImageAreaDimensions = {\r\n                        width: \"25%\",\r\n                        \"margin-top\": \"15px\"\r\n                    };\r\n                    let imageLink = document.querySelector(\"#image-link\" + imageCount + \"\");\r\n                    let titleLink = document.querySelector(\"#title-link\" + imageCount + \"\");\r\n                    let articleTitleArea = $(\"#title\" + imageCount + \"\");\r\n                    let articleImageArea = $(\"#img\" + imageCount + \"\");\r\n\r\n                    articleTitleArea.html(articleTitleContent);\r\n                    imageLink.setAttribute(\"href\", postUrl);\r\n                    titleLink.setAttribute(\"href\", postUrl);\r\n\r\n                    if (articleImageContent != null) {\r\n                        articleImageArea\r\n                        // .css(imageAreaDimensions)\r\n                            .attr(\"src\", articleImageContent);\r\n                    } else {\r\n                        articleImageArea\r\n                            .css(placeHolderImageAreaDimensions)\r\n                            .attr(\"src\", placeHolderImage);\r\n                    }\r\n                    imageCount++;\r\n                });\r\n        });\r\n    }\r\n});\r\n"]}